!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).GmapVue={})}(this,(function(e){"use strict";function t(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function o(e){for(var o=1;o<arguments.length;o++){var i=null!=arguments[o]?arguments[o]:{};o%2?t(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function s(e,t){if(null==e)return{};var o,i,n=function(e,t){if(null==e)return{};var o,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)o=s[i],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)o=s[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i,n,s,r,a=[],l=!0,c=!1;try{if(s=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;l=!1}else for(;!(l=(i=s.call(o)).done)&&(a.push(i.value),a.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=o.return&&(r=o.return(),Object(r)!==r))return}finally{if(c)throw n}}return a}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}function p(e,t,o){o.forEach((function(o){(e.$gmapOptions.autoBindAllEvents||e.$listeners[o])&&t.addListener(o,(function(t){e.$emit(o,t)}))}))}function d(e){return e.charAt(0).toUpperCase()+e.slice(1)}function u(e,t){return Object.keys(t).reduce((function(t,o){return void 0!==e[o]&&(t[o]=e[o]),t}),{})}function h(e){var t,o=!1;return function(){return o||(o=!0,t=e()),t}}function m(e){return Object.entries(e).map((function(e){var t=r(e,2),o=t[0],i=t[1],n={};return"type"in i&&(n.type=i.type),"default"in i&&(n.default=i.default),"required"in i&&(n.required=i.required),[o,n]})).reduce((function(e,t){var o=r(t,2),i=o[0],n=o[1];return e[i]=n,e}),{})}function f(e){var t=e.addEventListener?e.addEventListener:e.attachEvent;function o(o,i){if("keydown"===o){var n=i;i=function(t){var o=document?document.getElementsByClassName("pac-item-selected").length>0:null;if(13===t.which&&!o){var i=document.createEvent("Event");i.keyCode=40,i.which=40,n.apply(e,[i])}n.apply(e,[t])}}t.apply(e,[o,i])}e.addEventListener=o,e.attachEvent=o}function y(e){var t=0;e((function(){t+=1}),(function(){t=Math.max(0,t-1)}),(function(){return 0===t}))}function g(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=!1;function s(){n||(n=!0,e.$nextTick((function(){n=!1,o()})))}t.forEach((function(t){e.$watch(t,s,{immediate:i})}))}function b(e,t,o){Object.keys(o).forEach((function(i){var n=o[i],s=n.twoWay,r=n.type,a=n.trackProperties;if(!n.noBind){var l="set".concat(d(i)),c="get".concat(d(i)),p="".concat(i.toLowerCase(),"_changed"),u=e[i];if(void 0===t[l])throw new Error("".concat(l," is not a method of (the Maps object corresponding to) ").concat(e.$options._componentTag));r===Object&&a?g(e,a.map((function(e){return"".concat(i,".").concat(e)})),(function(){t[l](e[i])}),void 0!==e[i]):e.$watch(i,(function(){var o=e[i];t[l](o)}),{immediate:void 0!==u,deep:r===Object}),s&&(e.$gmapOptions.autoBindAllEvents||e.$listeners[p])&&t.addListener(p,(function(){e.$emit(p,t[c]())}))}}))}var v={bounds:{type:Object},componentRestrictions:{type:Object,noBind:!0},types:{type:Array,default:function(){return[]}}},O={circleOptions:{type:Object,twoWay:!1,noBind:!0},markerOptions:{type:Object,twoWay:!1,noBind:!0},polygonOptions:{type:Object,twoWay:!1,noBind:!0},polylineOptions:{type:Object,twoWay:!1,noBind:!0},rectangleOptions:{type:Object,twoWay:!1,noBind:!0}},$={options:{type:Object,twoWay:!1,default:function(){}},data:{type:Array,twoWay:!0}},w={content:{type:Object,twoWay:!0},options:{type:Object,required:!1,default:function(){return{}}},position:{type:Object,twoWay:!0},zIndex:{type:Number,twoWay:!0}},j={clickable:{type:Boolean,twoWay:!0,noBind:!0},map:{type:Object,twoWay:!0},preserveViewport:{type:Boolean,twoWay:!0,noBind:!0},screenOverlays:{type:Boolean,twoWay:!0,noBind:!0},suppressInfoWindows:{type:Boolean,twoWay:!0,noBind:!0},url:{type:String,twoWay:!1},zIndex:{type:Number,twoWay:!0},options:{type:Object,default:function(){return{}}}},k={center:{required:!0,twoWay:!0,type:Object,noBind:!0},zoom:{required:!1,twoWay:!0,type:Number,noBind:!0},heading:{type:Number,twoWay:!0},mapTypeId:{twoWay:!0,type:String},tilt:{twoWay:!0,type:Number},options:{type:Object,default:function(){return{}}}},M={animation:{twoWay:!0,type:Number},attribution:{type:Object},clickable:{type:Boolean,twoWay:!0,default:!0},cursor:{type:String,twoWay:!0},draggable:{type:Boolean,twoWay:!0,default:!1},icon:{twoWay:!0},label:{},opacity:{type:Number,default:1},options:{type:Object},place:{type:Object},position:{type:Object,twoWay:!0},shape:{type:Object,twoWay:!0},title:{type:String,twoWay:!0},zIndex:{type:Number,twoWay:!0},visible:{twoWay:!0,default:!0}},P={zoom:{twoWay:!0,type:Number},pov:{twoWay:!0,type:Object,trackProperties:["pitch","heading"]},position:{twoWay:!0,type:Object,noBind:!0},pano:{twoWay:!0,type:String},motionTracking:{twoWay:!1,type:Boolean},visible:{twoWay:!0,type:Boolean,default:!0},options:{twoWay:!1,type:Object,default:function(){return{}}}},_={clickable:{type:Boolean,noBind:!0},draggable:{type:Boolean},editable:{type:Boolean},fillColor:{type:String,noBind:!0},fillOpacity:{type:Number,noBind:!0},strokeColor:{type:String,noBind:!0},strokeOpacity:{type:Number,noBind:!0},strokePosition:{type:Number,noBind:!0},strokeWeight:{type:Number,noBind:!0},visible:{type:Boolean},options:{type:Object},path:{type:Array,twoWay:!0,noBind:!0},paths:{type:Array,twoWay:!0,noBind:!0}},C={clickable:{type:Boolean,noBind:!0},draggable:{type:Boolean},editable:{type:Boolean},strokeColor:{type:String,noBind:!0},strokeOpacity:{type:Number,noBind:!0},strokeWeight:{type:Number,noBind:!0},visible:{type:Boolean},options:{twoWay:!1,type:Object},path:{type:Array,twoWay:!0}},B={bounds:{type:Object,twoWay:!0},clickable:{type:Boolean,noBind:!0},draggable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},fillColor:{type:String,noBind:!0},fillOpacity:{type:Number,noBind:!0},strokeColor:{type:String,noBind:!0},strokeOpacity:{type:Number,noBind:!0},strokePosition:{type:Number,noBind:!0},strokeWeight:{type:Number,noBind:!0},visible:{type:Boolean},options:{type:Object,twoWay:!1}},S={center:{type:Object,twoWay:!0,required:!0},radius:{type:Number,twoWay:!0},clickable:{type:Boolean,noBind:!0},draggable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},fillColor:{type:String,noBind:!0},fillOpacity:{type:Number,noBind:!0},strokeColor:{type:String,noBind:!0},strokeOpacity:{type:Number,noBind:!0},strokePosition:{type:Number,noBind:!0},strokeWeight:{type:Number,noBind:!0},visible:{type:Boolean},options:{type:Object,twoWay:!1}},L={bounds:{type:Object},defaultPlace:{type:String,default:""},componentRestrictions:{type:Object,default:null},types:{type:Array,default:function(){return[]}},placeholder:{required:!1,type:String},className:{required:!1,type:String},label:{required:!1,type:String,default:null},selectFirstOnEnter:{require:!1,type:Boolean,default:!1}},A={algorithm:{type:Object},onClusterClick:{type:Function},renderer:{type:Object},options:{type:Object}};function x(e,t,o,i,n,s,r,a,l,c){"boolean"!=typeof r&&(l=a,a=r,r=!1);const p="function"==typeof o?o.options:o;let d;if(e&&e.render&&(p.render=e.render,p.staticRenderFns=e.staticRenderFns,p._compiled=!0,n&&(p.functional=!0)),i&&(p._scopeId=i),s?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},p._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),d)if(p.functional){const e=p.render;p.render=function(t,o){return d.call(o),e(t,o)}}else{const e=p.beforeCreate;p.beforeCreate=e?[].concat(e,d):[d]}return o}const E=x({render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e._t("default",(function(){return[o("input",e._g(e._b({ref:"input"},"input",e.$attrs,!1),e.$listeners))]}),{attrs:e.$attrs,listeners:e.$listeners})],2)},staticRenderFns:[]},undefined,{name:"AutocompleteInput",props:{bounds:{type:Object,default:void 0},componentRestrictions:{type:Object,default:void 0},types:{type:Array,default:void 0},selectFirstOnEnter:{required:!1,type:Boolean,default:!1},slotRefName:{required:!1,type:String,default:"input"},childRefName:{required:!1,type:String,default:"input"},options:{type:Object,default:void 0},setFieldsTo:{required:!1,type:Array,default:null}},watch:{componentRestrictions(e){void 0!==e&&this.$autocomplete.setComponentRestrictions(e)}},async mounted(){await this.$gmapApiPromiseLazy();let e=null;if(this.$scopedSlots.default){if(!Object.keys(this.$scopedSlots.default()[0].context.$refs).length)throw new Error("If you use the slot input you must add a ref to the element that you will use as the input, and if you use a vue component, eg: v-text-field, etc, you need to set the childRefName indicating what is the ref name of the html input elemnt behind your component.");e=this.$scopedSlots.default()[0].context.$refs[this.slotRefName],e&&e.$refs&&(e=e.$refs[this.childRefName]),e&&(this.$refs.input=e)}if(this.selectFirstOnEnter&&f(this.$refs.input),"function"!=typeof google.maps.places.Autocomplete)throw new Error("google.maps.places.Autocomplete is undefined. Did you add 'places' to libraries when loading Google Maps?");const t={...u(this,v),...this.options};this.$autocomplete=new google.maps.places.Autocomplete(this.$refs.input,t),b(this,this.$autocomplete,v),this.setFieldsTo&&this.$autocomplete.setFields(this.setFieldsTo),this.$autocomplete.addListener("place_changed",(()=>{this.$emit("place_changed",this.$autocomplete.getPlace())}))},destroyed(){this.$$autocomplete&&this.$$autocomplete.setMap&&this.$$autocomplete.setMap(null)}},undefined,false,undefined,!1,void 0,void 0,void 0);var W={inject:{$mapPromise:{default:"abcdef"}},provide:function(){var e=this;return this.$mapPromise.then((function(t){e.$map=t})),{}}};const N=x({},undefined,{name:"CircleShape",mixins:[W],render:()=>"",provide(){const e=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],t=this.$mapPromise.then((t=>{this.$map=t;const o={...this.options,map:t,...u(this,S)},{options:i,...n}=o;return this.$circleObject=new google.maps.Circle(n),b(this,this.$circleObject,S),p(this,this.$circleObject,e),this.$circleObject})).catch((e=>{throw e}));return this.$circlePromise=t,{$circlePromise:t}},props:{center:{type:Object,required:!0},radius:{type:Number,default:10},clickable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},fillColor:{type:String,default:""},fillOpacity:{type:Number,default:1},strokeColor:{type:String,default:""},strokeOpacity:{type:Number,default:1},strokePosition:{type:Number,default:0},strokeWeight:{type:Number,default:1},visible:{type:Boolean,default:!0},options:{type:Object,default:void 0}},destroyed(){this.$circleObject&&this.$circleObject.setMap&&this.$circleObject.setMap(null)}},undefined,undefined,undefined,!1,void 0,void 0,void 0);var I=function e(t,o){if(t===o)return!0;if(t&&o&&"object"==typeof t&&"object"==typeof o){if(t.constructor!==o.constructor)return!1;var i,n,s;if(Array.isArray(t)){if((i=t.length)!=o.length)return!1;for(n=i;0!=n--;)if(!e(t[n],o[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===o.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(o).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(o,s[n]))return!1;for(n=i;0!=n--;){var r=s[n];if(!e(t[r],o[r]))return!1}return!0}return t!=t&&o!=o};const z=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class R{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,o]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const i=o>>4;if(1!==i)throw new Error(`Got v${i} data when expected v1.`);const n=z[15&o];if(!n)throw new Error("Unrecognized array type.");const[s]=new Uint16Array(e,2,1),[r]=new Uint32Array(e,4,1);return new R(r,s,n,e)}constructor(e,t=64,o=Float64Array,i){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=o,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const n=z.indexOf(this.ArrayType),s=2*e*this.ArrayType.BYTES_PER_ELEMENT,r=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-r%8)%8;if(n<0)throw new Error(`Unexpected typed array class: ${o}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+r+a,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+s+r+a),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+r+a,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+n]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const o=this._pos>>1;return this.ids[o]=o,this.coords[this._pos++]=e,this.coords[this._pos++]=t,o}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return T(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,o,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:s,nodeSize:r}=this,a=[0,n.length-1,0],l=[];for(;a.length;){const c=a.pop()||0,p=a.pop()||0,d=a.pop()||0;if(p-d<=r){for(let r=d;r<=p;r++){const a=s[2*r],c=s[2*r+1];a>=e&&a<=o&&c>=t&&c<=i&&l.push(n[r])}continue}const u=d+p>>1,h=s[2*u],m=s[2*u+1];h>=e&&h<=o&&m>=t&&m<=i&&l.push(n[u]),(0===c?e<=h:t<=m)&&(a.push(d),a.push(u-1),a.push(1-c)),(0===c?o>=h:i>=m)&&(a.push(u+1),a.push(p),a.push(1-c))}return l}within(e,t,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:n,nodeSize:s}=this,r=[0,i.length-1,0],a=[],l=o*o;for(;r.length;){const c=r.pop()||0,p=r.pop()||0,d=r.pop()||0;if(p-d<=s){for(let o=d;o<=p;o++)Z(n[2*o],n[2*o+1],e,t)<=l&&a.push(i[o]);continue}const u=d+p>>1,h=n[2*u],m=n[2*u+1];Z(h,m,e,t)<=l&&a.push(i[u]),(0===c?e-o<=h:t-o<=m)&&(r.push(d),r.push(u-1),r.push(1-c)),(0===c?e+o>=h:t+o>=m)&&(r.push(u+1),r.push(p),r.push(1-c))}return a}}function T(e,t,o,i,n,s){if(n-i<=o)return;const r=i+n>>1;D(e,t,r,i,n,s),T(e,t,o,i,r-1,1-s),T(e,t,o,r+1,n,1-s)}function D(e,t,o,i,n,s){for(;n>i;){if(n-i>600){const r=n-i+1,a=o-i+1,l=Math.log(r),c=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*c*(r-c)/r)*(a-r/2<0?-1:1);D(e,t,o,Math.max(i,Math.floor(o-a*c/r+p)),Math.min(n,Math.floor(o+(r-a)*c/r+p)),s)}const r=t[2*o+s];let a=i,l=n;for(F(e,t,i,o),t[2*n+s]>r&&F(e,t,i,n);a<l;){for(F(e,t,a,l),a++,l--;t[2*a+s]<r;)a++;for(;t[2*l+s]>r;)l--}t[2*i+s]===r?F(e,t,i,l):(l++,F(e,t,l,n)),l<=o&&(i=l+1),o<=l&&(n=l-1)}}function F(e,t,o,i){U(e,o,i),U(t,2*o,2*i),U(t,2*o+1,2*i+1)}function U(e,t,o){const i=e[t];e[t]=e[o],e[o]=i}function Z(e,t,o,i){const n=e-o,s=t-i;return n*n+s*s}const G={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},q=Math.fround||(V=new Float32Array(1),e=>(V[0]=+e,V[0]));var V;const K=3,H=5,X=6;class Y{constructor(e){this.options=Object.assign(Object.create(G),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:o,maxZoom:i}=this.options;t&&console.time("total time");const n=`prepare ${e.length} points`;t&&console.time(n),this.points=e;const s=[];for(let t=0;t<e.length;t++){const o=e[t];if(!o.geometry)continue;const[i,n]=o.geometry.coordinates,r=q(ee(i)),a=q(te(n));s.push(r,a,1/0,t,-1,1),this.options.reduce&&s.push(0)}let r=this.trees[i+1]=this._createTree(s);t&&console.timeEnd(n);for(let e=i;e>=o;e--){const o=+Date.now();r=this.trees[e]=this._createTree(this._cluster(r,e)),t&&console.log("z%d: %d clusters in %dms",e,r.numItems,+Date.now()-o)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let o=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let n=180===e[2]?180:((e[2]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)o=-180,n=180;else if(o>n){const e=this.getClusters([o,i,180,s],t),r=this.getClusters([-180,i,n,s],t);return e.concat(r)}const r=this.trees[this._limitZoom(t)],a=r.range(ee(o),te(s),ee(n),te(i)),l=r.data,c=[];for(const e of a){const t=this.stride*e;c.push(l[t+H]>1?J(l,t,this.clusterProps):this.points[l[t+K]])}return c}getChildren(e){const t=this._getOriginId(e),o=this._getOriginZoom(e),i="No cluster with the specified id.",n=this.trees[o];if(!n)throw new Error(i);const s=n.data;if(t*this.stride>=s.length)throw new Error(i);const r=this.options.radius/(this.options.extent*Math.pow(2,o-1)),a=s[t*this.stride],l=s[t*this.stride+1],c=n.within(a,l,r),p=[];for(const t of c){const o=t*this.stride;s[o+4]===e&&p.push(s[o+H]>1?J(s,o,this.clusterProps):this.points[s[o+K]])}if(0===p.length)throw new Error(i);return p}getLeaves(e,t,o){t=t||10,o=o||0;const i=[];return this._appendLeaves(i,e,t,o,0),i}getTile(e,t,o){const i=this.trees[this._limitZoom(e)],n=Math.pow(2,e),{extent:s,radius:r}=this.options,a=r/s,l=(o-a)/n,c=(o+1+a)/n,p={features:[]};return this._addTileFeatures(i.range((t-a)/n,l,(t+1+a)/n,c),i.data,t,o,n,p),0===t&&this._addTileFeatures(i.range(1-a/n,l,1,c),i.data,n,o,n,p),t===n-1&&this._addTileFeatures(i.range(0,l,a/n,c),i.data,-1,o,n,p),p.features.length?p:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const o=this.getChildren(e);if(t++,1!==o.length)break;e=o[0].properties.cluster_id}return t}_appendLeaves(e,t,o,i,n){const s=this.getChildren(t);for(const t of s){const s=t.properties;if(s&&s.cluster?n+s.point_count<=i?n+=s.point_count:n=this._appendLeaves(e,s.cluster_id,o,i,n):n<i?n++:e.push(t),e.length===o)break}return n}_createTree(e){const t=new R(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let o=0;o<e.length;o+=this.stride)t.add(e[o],e[o+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,o,i,n,s){for(const r of e){const e=r*this.stride,a=t[e+H]>1;let l,c,p;if(a)l=Q(t,e,this.clusterProps),c=t[e],p=t[e+1];else{const o=this.points[t[e+K]];l=o.properties;const[i,n]=o.geometry.coordinates;c=ee(i),p=te(n)}const d={type:1,geometry:[[Math.round(this.options.extent*(c*n-o)),Math.round(this.options.extent*(p*n-i))]],tags:l};let u;u=a||this.options.generateId?t[e+K]:this.points[t[e+K]].id,void 0!==u&&(d.id=u),s.features.push(d)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:o,extent:i,reduce:n,minPoints:s}=this.options,r=o/(i*Math.pow(2,t)),a=e.data,l=[],c=this.stride;for(let o=0;o<a.length;o+=c){if(a[o+2]<=t)continue;a[o+2]=t;const i=a[o],p=a[o+1],d=e.within(a[o],a[o+1],r),u=a[o+H];let h=u;for(const e of d){const o=e*c;a[o+2]>t&&(h+=a[o+H])}if(h>u&&h>=s){let e,s=i*u,r=p*u,m=-1;const f=((o/c|0)<<5)+(t+1)+this.points.length;for(const i of d){const l=i*c;if(a[l+2]<=t)continue;a[l+2]=t;const p=a[l+H];s+=a[l]*p,r+=a[l+1]*p,a[l+4]=f,n&&(e||(e=this._map(a,o,!0),m=this.clusterProps.length,this.clusterProps.push(e)),n(e,this._map(a,l)))}a[o+4]=f,l.push(s/h,r/h,1/0,f,-1,h),n&&l.push(m)}else{for(let e=0;e<c;e++)l.push(a[o+e]);if(h>1)for(const e of d){const o=e*c;if(!(a[o+2]<=t)){a[o+2]=t;for(let e=0;e<c;e++)l.push(a[o+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,o){if(e[t+H]>1){const i=this.clusterProps[e[t+X]];return o?Object.assign({},i):i}const i=this.points[e[t+K]].properties,n=this.options.map(i);return o&&n===i?Object.assign({},n):n}}function J(e,t,o){return{type:"Feature",id:e[t+K],properties:Q(e,t,o),geometry:{type:"Point",coordinates:[(i=e[t],360*(i-.5)),oe(e[t+1])]}};var i}function Q(e,t,o){const i=e[t+H],n=i>=1e4?`${Math.round(i/1e3)}k`:i>=1e3?Math.round(i/100)/10+"k":i,s=e[t+X],r=-1===s?{}:Object.assign({},o[s]);return Object.assign(r,{cluster:!0,cluster_id:e[t+K],point_count:i,point_count_abbreviated:n})}function ee(e){return e/360+.5}function te(e){const t=Math.sin(e*Math.PI/180),o=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return o<0?0:o>1?1:o}function oe(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */class ie{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class ne{constructor({markers:e,position:t}){this.markers=e,t&&(t instanceof google.maps.LatLng?this._position=t:this._position=new google.maps.LatLng(t))}get bounds(){if(0===this.markers.length&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend(ie.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((e=>ie.getVisible(e))).length}push(e){this.markers.push(e)}delete(){this.marker&&(ie.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class se{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return re(e)}}const re=e=>e.map((e=>new ne({position:ie.getPosition(e),markers:[e]})));class ae extends se{constructor(e){var{maxZoom:t,radius:o=60}=e,i=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o}(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new Y(Object.assign({maxZoom:this.maxZoom,radius:o},i))}calculate(e){let t=!1;const o={zoom:e.map.getZoom()};if(!I(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const o=this.markers.map((e=>{const t=ie.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}}));this.superCluster.load(o)}return t||(this.state.zoom<=this.maxZoom||o.zoom<=this.maxZoom)&&(t=!I(this.state,o)),this.state=o,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map((e=>this.transformCluster(e)))}transformCluster({geometry:{coordinates:[e,t]},properties:o}){if(o.cluster)return new ne({markers:this.superCluster.getLeaves(o.cluster_id,1/0).map((e=>e.properties.marker)),position:{lat:t,lng:e}});const i=o.marker;return new ne({markers:[i],position:ie.getPosition(i)})}}class le{constructor(e,t){this.markers={sum:e.length};const o=t.map((e=>e.count)),i=o.reduce(((e,t)=>e+t),0);this.clusters={count:t.length,markers:{mean:i/t.length,sum:i,min:Math.min(...o),max:Math.max(...o)}}}}class ce{render({count:e,position:t},o,i){const n=`<svg fill="${e>Math.max(10,o.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${e}</text>\n</svg>`,s=`Cluster of ${e} markers`,r=Number(google.maps.Marker.MAX_ZINDEX)+e;if(ie.isAdvancedMarkerAvailable(i)){const e=(new DOMParser).parseFromString(n,"image/svg+xml").documentElement;e.setAttribute("transform","translate(0 25)");const o={map:i,position:t,zIndex:r,title:s,content:e};return new google.maps.marker.AdvancedMarkerElement(o)}const a={position:t,zIndex:r,title:s,icon:{url:`data:image/svg+xml;base64,${btoa(n)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(a)}}class pe{constructor(){!function(e,t){for(let o in t.prototype)e.prototype[o]=t.prototype[o]}(pe,google.maps.OverlayView)}}var de;!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"}(de||(de={}));const ue=(e,t,o)=>{o.fitBounds(t.bounds)};class he extends pe{constructor({map:e,markers:t=[],algorithmOptions:o={},algorithm:i=new ae(o),renderer:n=new ce,onClusterClick:s=ue}){super(),this.markers=[...t],this.clusters=[],this.algorithm=i,this.renderer=n,this.onClusterClick=s,e&&this.setMap(e)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach((e=>{this.addMarker(e,!0)})),t||this.render()}removeMarker(e,t){const o=this.markers.indexOf(e);return-1!==o&&(ie.setMap(e,null),this.markers.splice(o,1),t||this.render(),!0)}removeMarkers(e,t){let o=!1;return e.forEach((e=>{o=this.removeMarker(e,!0)||o})),o&&!t&&this.render(),o}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,de.CLUSTERING_BEGIN,this);const{clusters:t,changed:o}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(o||null==o){const e=new Set;for(const o of t)1==o.markers.length&&e.add(o.markers[0]);const o=[];for(const t of this.clusters)null!=t.marker&&(1==t.markers.length?e.has(t.marker)||ie.setMap(t.marker,null):o.push(t.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame((()=>o.forEach((e=>ie.setMap(e,null)))))}google.maps.event.trigger(this,de.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((e=>ie.setMap(e,null))),this.clusters.forEach((e=>e.delete())),this.clusters=[]}renderClusters(){const e=new le(this.markers,this.clusters),t=this.getMap();this.clusters.forEach((o=>{1===o.markers.length?o.marker=o.markers[0]:(o.marker=this.renderer.render(o,e,t),o.markers.forEach((e=>ie.setMap(e,null))),this.onClusterClick&&o.marker.addListener("click",(e=>{google.maps.event.trigger(this,de.CLUSTER_CLICK,o),this.onClusterClick(e,o,t)}))),ie.setMap(o.marker,t)}))}}const me=x({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._t("default")],2)},staticRenderFns:[]},undefined,{name:"ClusterIcon",mixins:[W],provide(){const e=["click","rightclick","dblclick","drag","dragstart","dragend","mouseup","mousedown","mouseover","mouseout"],t=this.$mapPromise.then((t=>{this.$map=t;const o={...this.options,map:t,...u(this,A)},{options:i,...n}=o;if(void 0===he)throw new Error("MarkerClusterer is not installed! require() it or include it from https://cdnjs.cloudflare.com/ajax/libs/js-marker-clusterer/1.0.0/markerclusterer.js");const{map:s,markers:r,algorithm:a,onClusterClick:l,renderer:c}=n;return this.$clusterObject=new he({map:s,markers:r,algorithm:a,onClusterClick:l,renderer:c}),b(this,this.$clusterObject,{}),p(this,this.$clusterObject,e),Object.keys({}).forEach((e=>{({})[e].twoWay&&this.$on(`${e.toLowerCase()}_changed`,this.reinsertMarkers)})),this.$clusterObject})).catch((e=>{throw e}));return this.$clusterPromise=t,{$clusterPromise:t}},props:{algorithm:{type:Object,default:void 0},onClusterClick:{type:Function,default:void 0},renderer:{type:Object,default:void 0},options:{type:Object,default:void 0}},beforeDestroy(){this.$children.forEach((e=>{e.$clusterObject===this.$clusterObject&&(e.$clusterObject=null)})),this.$clusterObject&&this.$clusterObject.clearMarkers()},destroyed(){this.$clusterObject&&this.$clusterObject.setMap&&this.$clusterObject.setMap(null)},updated(){this.$clusterObject&&this.$clusterObject.render()},methods:{reinsertMarkers(){const e=[...this.$clusterObject.markers];this.$clusterObject.clearMarkers(),this.$clusterObject.addMarkers(e)}}},undefined,false,undefined,!1,void 0,void 0,void 0);const fe=x({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._t("default",null,{setDrawingMode:e.setDrawingMode,deleteSelection:e.deleteSelection})],2)},staticRenderFns:[]},undefined,{name:"DrawingManager",mixins:[W],provide(){const e=this.$mapPromise.then((e=>{this.$map=e;const t={...this.options,map:e,...u(this,O)},{options:o,...i}=t;this.drawingModes=Object.keys(i).reduce(((e,t)=>{const o=t.split("Options");return o.length>1&&e.push(o[0]),e}),[]);const n=this.position&&google.maps.ControlPosition[this.position]?google.maps.ControlPosition[this.position]:google.maps.ControlPosition.TOP_LEFT;return i.drawingMode=null,i.drawingControl=!this.$scopedSlots.default,i.drawingControlOptions={drawingModes:this.drawingModes,position:n},this.$drawingManagerObject=new google.maps.drawing.DrawingManager(i),b(this,this.$drawingManagerObject,O),this.$drawingManagerObject.addListener("overlaycomplete",(e=>this.addShape(e))),this.$map.addListener("click",this.clearSelection),this&&this.finalShapes&&this.finalShapes.length&&this.drawAll(),this.$drawingManagerObject})).catch((e=>{throw e}));return this.$drawingManagerPromise=e,{$drawingManagerPromise:e}},props:{circleOptions:{type:Object,default:void 0},markerOptions:{type:Object,default:void 0},polygonOptions:{type:Object,default:void 0},polylineOptions:{type:Object,default:void 0},rectangleOptions:{type:Object,default:void 0},position:{type:String,default:""},shapes:{type:Array,required:!0}},data:()=>({selectedShape:null,drawingModes:[],options:{drawingMode:null,drawingControl:!0,drawingControlOptions:{}},finalShapes:[]}),watch:{position(e){if(this.$drawingManagerObject){const t={position:e&&google.maps.ControlPosition[e]?google.maps.ControlPosition[e]:google.maps.ControlPosition.TOP_LEFT,drawingModes:this.drawingModes};this.$drawingManagerObject.setOptions({drawingControlOptions:t})}},circleOptions(e){this.$drawingManagerObject&&this.$drawingManagerObject.setOptions({circleOptions:e})},markerOptions(e){this.$drawingManagerObject&&this.$drawingManagerObject.setOptions({markerOptions:e})},polygonOptions(e){this.$drawingManagerObject&&this.$drawingManagerObject.setOptions({polygonOptions:e})},polylineOptions(e){this.$drawingManagerObject&&this.$drawingManagerObject.setOptions({polylineOptions:e})},rectangleOptions(e){this.$drawingManagerObject&&this.$drawingManagerObject.setOptions({rectangleOptions:e})}},mounted(){this.finalShapes=[...this.shapes]},destroyed(){this.clearAll(),this.$drawingManagerObject&&this.$drawingManagerObject.setMap&&this.$drawingManagerObject.setMap(null)},methods:{setDrawingMode(e){this.$drawingManagerObject.setDrawingMode(e)},drawAll(){const e={circle:google.maps.Circle,marker:google.maps.Marker,polygon:google.maps.Polygon,polyline:google.maps.Polyline,rectangle:google.maps.Rectangle},t=this;this.finalShapes.forEach((o=>{const i=new e[o.type](o.overlay);i.setMap(this.$map),o.overlay=i,google.maps.event.addListener(i,"click",(()=>{t.setSelection(o)}))}))},clearAll(){this.clearSelection(),this.finalShapes.forEach((e=>{e.overlay.setMap(null)}))},clearSelection(){this.selectedShape&&(this.selectedShape.overlay.setEditable(!1),this.selectedShape.overlay.setDraggable(!1),this.selectedShape=null)},setSelection(e){this.clearSelection(),this.selectedShape=e,e.overlay.setEditable(!0),e.overlay.setDraggable(!0)},deleteSelection(){if(this.selectedShape){this.selectedShape.overlay.setMap(null);const e=this.finalShapes.indexOf(this.selectedShape);e>-1&&this.finalShapes.splice(e,1)}},addShape(e){this.setDrawingMode(null),this.finalShapes.push(e),this.$emit("update:shapes",[...this.finalShapes]);const t=this;google.maps.event.addListener(e.overlay,"click",(()=>{t.setSelection(e)})),google.maps.event.addListener(e.overlay,"rightclick",(()=>{t.deleteSelection()})),this.setSelection(e)}}},undefined,false,undefined,!1,void 0,void 0,void 0);const ye=x({},undefined,{name:"HeatmapLayer",mixins:[W],render:()=>"",provide(){const e=[],t=this.$mapPromise.then((t=>{this.$map=t;const o={...this.options,map:this.$map,...u(this,$)},{options:i,...n}=o;return this.$heatmapLayerObject=new google.maps.visualization.HeatmapLayer(n),b(this,this.$heatmapLayerObject,$),p(this,this.$heatmapLayerObject,e),this.$heatmapLayerObject})).catch((e=>{throw e}));return this.$heatmapLayerPromise=t,{$heatmapLayerPromise:t}},props:{options:{type:Object,default:()=>{}},data:{type:Array,default:void 0}},destroyed(){this.$heatmapLayerObject&&this.$heatmapLayerObject.setMap&&this.$heatmapLayerObject.setMap(null)}},undefined,undefined,undefined,!1,void 0,void 0,void 0);const ge=x({render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{ref:"flyaway"},[e._t("default")],2)])},staticRenderFns:[]},undefined,{name:"InfoWindow",mixins:[W],inject:{$markerPromise:{default:null}},provide(){const e=["domready","closeclick","content_changed"],t=this.$mapPromise.then((t=>{this.$map=t;const o={...this.options,map:t,...u(this,w)},{options:i,position:n,...s}=o;return s.content=this.$refs.flyaway,this.$markerPromise&&this.$markerPromise.then((e=>(this.$markerObject=e,e))),this.$infoWindowObject=new google.maps.InfoWindow(s),b(this,this.$infoWindowObject,w),p(this,this.$infoWindowObject,e),this._openInfoWindow(),this.$watch("opened",(()=>{this._openInfoWindow()})),this.$infoWindowObject})).catch((e=>{throw e}));return this.$infoWindowPromise=t,{$infoWindowPromise:t}},props:{content:{type:[String,Object],default:void 0},opened:{type:Boolean,default:!0},position:{type:Object,default:void 0},zIndex:{type:Number,default:0},options:{type:Object,required:!1,default:void 0}},mounted(){const e=this.$refs.flyaway;e.parentNode.removeChild(e)},destroyed(){this.$infoWindowObject&&this.$infoWindowObject.setMap&&this.$infoWindowObject.setMap(null)},methods:{_openInfoWindow(){this.opened?null!==this.$markerObject?this.$infoWindowObject.open(this.$map,this.$markerObject):this.$infoWindowObject.open(this.$map):this.$infoWindowObject.close()}}},undefined,false,undefined,!1,void 0,void 0,void 0);const be=x({},undefined,{name:"KmlLayer",mixins:[W],render:()=>"",provide(){const e=["click","rightclick","dblclick","mouseup","mousedown","mouseover","mouseout"],t=this.$mapPromise.then((t=>{this.$map=t;const o={...this.options,map:t,...u(this,j)},{options:i,...n}=o;return this.$kmlLayerObject=new google.maps.KmlLayer(n),b(this,this.$kmlLayerObject,j),p(this,this.$kmlLayerObject,e),this.$kmlLayerObject})).catch((e=>{throw e}));return this.$kmlLayerPromise=t,{$kmlLayerPromise:t}},props:{clickable:{type:Boolean,default:!0},map:{type:Object,default:void 0},preserveViewport:{type:Boolean,default:!1},screenOverlays:{type:Boolean,default:!1},suppressInfoWindows:{type:Boolean,default:void 0},url:{type:String,default:""},zIndex:{type:Number,default:void 0},options:{type:Object,default:void 0}},destroyed(){this.$kmlLayerObject&&this.$kmlLayerObject.setMap&&this.$kmlLayerObject.setMap(null)}},undefined,undefined,undefined,!1,void 0,void 0,void 0);var ve={props:["resizeBus"],data:function(){return{_actualResizeBus:null}},created:function(){void 0===this.resizeBus?this.$data._actualResizeBus=this.$gmapDefaultResizeBus:this.$data._actualResizeBus=this.resizeBus},methods:{_resizeCallback:function(){this.resize()},_delayedResizeCallback:function(){var e=this;this.$nextTick((function(){return e._resizeCallback()}))}},watch:{resizeBus:function(e){this.$data._actualResizeBus=e},"$data._actualResizeBus":function(e,t){t&&t.$off("resize",this._delayedResizeCallback),e&&e.$on("resize",this._delayedResizeCallback)}},destroyed:function(){this.$data._actualResizeBus&&this.$data._actualResizeBus.$off("resize",this._delayedResizeCallback)}},Oe={name:"MapLayer",mixins:[ve],provide(){return this.$mapPromise=new Promise(((e,t)=>{this.$mapPromiseDeferred={resolve:e,reject:t}})),{$mapPromise:this.$mapPromise}},props:{center:{type:Object,required:!0},zoom:{type:Number,required:!1,default:void 0},heading:{type:Number,default:void 0},mapTypeId:{type:String,default:"roadmap"},tilt:{type:Number,default:void 0},options:{type:Object,default:void 0}},data:()=>({recyclePrefix:"__gmc__"}),computed:{finalLat(){return this.center&&"function"==typeof this.center.lat?this.center.lat():this.center.lat},finalLng(){return this.center&&"function"==typeof this.center.lng?this.center.lng():this.center.lng},finalLatLng(){return{lat:this.finalLat,lng:this.finalLng}}},watch:{zoom(e){this.$mapObject&&this.$mapObject.setZoom(e)}},beforeDestroy(){const e=this.getRecycleKey();window[e]&&(window[e].div=this.$mapObject.getDiv())},mounted(){return this.$gmapApiPromiseLazy().then((()=>{const e=this.$refs["vue-map"],t={...this.options,...u(this,k)},{options:o,...i}=t,n=i,s=this.getRecycleKey();return this&&this.options&&this.options.recycle&&window[s]?(e.appendChild(window[s].div),this.$mapObject=window[s].map,this.$mapObject.setOptions(n)):(this.$mapObject=new google.maps.Map(e,n),window[s]={map:this.$mapObject}),b(this,this.$mapObject,k),p(this,this.$mapObject,["bounds_changed","click","dblclick","drag","dragend","dragstart","idle","mousemove","mouseout","mouseover","resize","rightclick","tilesloaded"]),y(((e,t,o)=>{this.$mapObject.addListener("center_changed",(()=>{o()&&this.$emit("center_changed",this.$mapObject.getCenter()),t()}));g(this,["finalLat","finalLng"],(()=>{e(),this.$mapObject.setCenter(this.finalLatLng)}))})),this.$mapObject.addListener("zoom_changed",(()=>{this.$emit("zoom_changed",this.$mapObject.getZoom())})),this.$mapObject.addListener("bounds_changed",(()=>{this.$emit("bounds_changed",this.$mapObject.getBounds())})),this.$mapPromiseDeferred.resolve(this.$mapObject),this.$mapObject})).catch((e=>{throw e}))},methods:{resize(){this.$mapObject&&google.maps.event.trigger(this.$mapObject,"resize")},resizePreserveCenter(){if(!this.$mapObject)return;const e=this.$mapObject.getCenter();google.maps.event.trigger(this.$mapObject,"resize"),this.$mapObject.setCenter(e)},_resizeCallback(){this.resizePreserveCenter()},panBy(...e){this.$mapObject&&this.$mapObject.panBy(...e)},panTo(...e){this.$mapObject&&this.$mapObject.panTo(...e)},panToBounds(...e){this.$mapObject&&this.$mapObject.panToBounds(...e)},fitBounds(...e){this.$mapObject&&this.$mapObject.fitBounds(...e)},getRecycleKey(){return this&&this.options&&this.options.recycle?this.recyclePrefix+this.options.recycle:this.recyclePrefix}},destroyed(){this.$mapObject&&this.$mapObject.setMap&&this.$mapObject.setMap(null)}};const $e="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function we(e){return(e,t)=>function(e,t){const o=$e?t.media||"default":e,i=ke[o]||(ke[o]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);let o=t.source;if(t.map&&(o+="\n/*# sourceURL="+t.map.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",t.media&&i.element.setAttribute("media",t.media),void 0===je&&(je=document.head||document.getElementsByTagName("head")[0]),je.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(o),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const e=i.ids.size-1,t=document.createTextNode(o),n=i.element.childNodes;n[e]&&i.element.removeChild(n[e]),n.length?i.element.insertBefore(t,n[e]):i.element.appendChild(t)}}}(e,t)}let je;const ke={};const Me=x({render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"vue-map-container"},[o("div",{ref:"vue-map",staticClass:"vue-map"}),e._v(" "),o("div",{staticClass:"vue-map-hidden"},[e._t("default")],2),e._v(" "),e._t("visible")],2)},staticRenderFns:[]},(function(e){e&&e("data-v-58f81a38_0",{source:".vue-map-container{position:relative}.vue-map-container .vue-map{left:0;right:0;top:0;bottom:0;position:absolute}.vue-map-hidden{display:none}",map:void 0,media:void 0})}),Oe,undefined,false,undefined,!1,we,void 0,void 0);const Pe=x({},undefined,{name:"MarkerIcon",mixins:[W],inject:{$clusterPromise:{default:null}},provide(){const e=["click","rightclick","dblclick","drag","dragstart","dragend","mouseup","mousedown","mouseover","mouseout"],t=this.$mapPromise.then((t=>{this.$map=t;const o={...this.options,map:t,...u(this,M)},{options:i,...n}=o;return this.$clusterPromise&&(n.map=null),this.$markerObject=new google.maps.Marker(n),b(this,this.$markerObject,M),p(this,this.$markerObject,e),this.$markerObject.addListener("dragend",(()=>{const e=this.$markerObject.getPosition();this.$emit("update:position",{lat:e.lat(),lng:e.lng()})})),this.$clusterPromise&&this.$clusterPromise.then((e=>{e.addMarker(this.$markerObject),this.$clusterObject=e})),this.$markerObject})).catch((e=>{throw e}));return this.$markerPromise=t,{$markerPromise:t}},props:{animation:{type:Number,default:void 0},attribution:{type:Object,default:void 0},clickable:{type:Boolean,default:!0},cursor:{type:String,default:void 0},draggable:{type:Boolean,default:!1},icon:{type:[String,Object],default:void 0},label:{type:[String,Object],default:void 0},opacity:{type:Number,default:1},options:{type:Object,default:void 0},place:{type:Object,default:void 0},position:{type:Object,default:void 0},shape:{type:Object,default:void 0},title:{type:String,default:void 0},visible:{type:Boolean,default:!0},zIndex:{type:Number,default:void 0}},destroyed(){this.$markerObject&&(this.$clusterObject?this.$clusterObject.removeMarker(this.$markerObject,!0):this.$markerObject&&this.$markerObject.setMap&&this.$markerObject.setMap(null))},render(e){return this.$slots.default&&0!==this.$slots.default.length?1===this.$slots.default.length?this.$slots.default[0]:e("div",this.$slots.default):""}},undefined,undefined,undefined,!1,void 0,void 0,void 0);const _e=x({render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("label",[o("span",{domProps:{textContent:e._s(e.label)}}),e._v(" "),o("input",{ref:"input",class:e.className,attrs:{type:"text",placeholder:e.placeholder}})])},staticRenderFns:[]},undefined,{name:"PlaceInput",props:{bounds:{type:Object,default:void 0},defaultPlace:{type:String,default:""},componentRestrictions:{type:Object,default:null},types:{type:Array,default:void 0},placeholder:{required:!1,type:String,default:void 0},className:{required:!1,type:String,default:void 0},label:{required:!1,type:String,default:null},selectFirstOnEnter:{require:!1,type:Boolean,default:!1}},created(){window.console.warn("The PlaceInput class is deprecated! Please consider using the Autocomplete input instead, it will be removed in the next major release of this plugin.")},mounted(){const{input:e}=this.$refs;e.value=this.defaultPlace,this.$watch("defaultPlace",(()=>{e.value=this.defaultPlace})),this.$gmapApiPromiseLazy().then((()=>{const e=u(this,L);if(this.selectFirstOnEnter&&f(this.$refs.input),"function"!=typeof google.maps.places.Autocomplete)throw new Error("google.maps.places.Autocomplete is undefined. Did you add 'places' to libraries when loading Google Maps?");this.$autoCompleter=new google.maps.places.Autocomplete(this.$refs.input,e);const{placeholder:t,place:o,defaultPlace:i,className:n,label:s,selectFirstOnEnter:r,...a}=L;b(this,this.$autoCompleter,a),this.$autoCompleter.addListener("place_changed",(()=>{this.$emit("place_changed",this.$autoCompleter.getPlace())}))}))},destroyed(){this.$autoCompleter&&this.$autoCompleter.setMap&&this.$autoCompleter.setMap(null)}},undefined,false,undefined,!1,void 0,void 0,void 0);const Ce=x({},undefined,{name:"PolygonShape",mixins:[W],render:()=>"",provide(){const e=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],t=this.$mapPromise.then((t=>{this.$map=t;const o={...this.options,map:t,...u(this,_)},{options:i,path:n,paths:s,...r}=o;this.$polygonObject=new google.maps.Polygon(r),b(this,this.$polygonObject,_),p(this,this.$polygonObject,e);let a=()=>{};return this.$watch("paths",(e=>{if(e){a(),this.$polygonObject.setPaths(e);const t=()=>{this.$emit("paths_changed",this.$polygonObject.getPaths())},o=[],i=this.$polygonObject.getPaths();for(let e=0;e<i.getLength();e+=1){const n=i.getAt(e);o.push([n,n.addListener("insert_at",t)]),o.push([n,n.addListener("remove_at",t)]),o.push([n,n.addListener("set_at",t)])}o.push([i,i.addListener("insert_at",t)]),o.push([i,i.addListener("remove_at",t)]),o.push([i,i.addListener("set_at",t)]),a=()=>{o.forEach((([,e])=>{google.maps.event.removeListener(e)}))}}}),{deep:this.deepWatch,immediate:!0}),this.$watch("path",(e=>{if(e){a(),this.$polygonObject.setPaths(e);const t=this.$polygonObject.getPath(),o=[],i=()=>{this.$emit("path_changed",this.$polygonObject.getPath())};o.push([t,t.addListener("insert_at",i)]),o.push([t,t.addListener("remove_at",i)]),o.push([t,t.addListener("set_at",i)]),a=()=>{o.forEach((([,e])=>{google.maps.event.removeListener(e)}))}}}),{deep:this.deepWatch,immediate:!0}),this.$polygonObject})).catch((e=>{throw e}));return this.$polygonPromise=t,{$polygonPromise:t}},props:{deepWatch:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},fillColor:{type:String,default:""},fillOpacity:{type:Number,default:1},strokeColor:{type:String,default:""},strokeOpacity:{type:Number,default:1},strokePosition:{type:Number,default:0},strokeWeight:{type:Number,default:1},visible:{type:Boolean,default:!0},options:{type:Object,default:void 0},path:{type:Array,noBind:!0,default:void 0},paths:{type:Array,noBind:!0,default:void 0}},destroyed(){this.$polygonObject&&this.$polygonObject.setMap&&this.$polygonObject.setMap(null)}},undefined,undefined,undefined,!1,void 0,void 0,void 0);const Be=x({},undefined,{name:"PolylineShape",mixins:[W],render:()=>"",provide(){const e=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],t=this.$mapPromise.then((t=>{this.$map=t;const o={...this.options,map:t,...u(this,C)},{options:i,...n}=o;this.$polylineObject=new google.maps.Polyline(n),b(this,this.$polylineObject,C),p(this,this.$polylineObject,e);let s=()=>{};return this.$watch("path",(e=>{if(e){s(),this.$polylineObject.setPath(e);const t=this.$polylineObject.getPath(),o=[],i=()=>{this.$emit("path_changed",this.$polylineObject.getPath())};o.push([t,t.addListener("insert_at",i)]),o.push([t,t.addListener("remove_at",i)]),o.push([t,t.addListener("set_at",i)]),s=()=>{o.forEach((([,e])=>{google.maps.event.removeListener(e)}))}}}),{deep:this.deepWatch,immediate:!0}),this.$polylineObject})).catch((e=>{throw e}));return this.$polylinePromise=t,{$polylinePromise:t}},props:{deepWatch:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},draggable:{type:Boolean},editable:{type:Boolean},strokeColor:{type:String,default:""},strokeOpacity:{type:Number,default:1},strokeWeight:{type:Number,default:1},visible:{type:Boolean,default:!0},options:{type:Object,default:void 0},path:{type:Array,default:void 0}},destroyed(){this.$polylineObject&&this.$polylineObject.setMap&&this.$polylineObject.setMap(null)}},undefined,undefined,undefined,!1,void 0,void 0,void 0);const Se=x({},undefined,{name:"RectangleShape",mixins:[W],render:()=>"",provide(){const e=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],t=this.$mapPromise.then((t=>{this.$map=t;const o={...this.options,map:t,...u(this,B)},{options:i,...n}=o;return this.$rectangleObject=new google.maps.Rectangle(n),b(this,this.$rectangleObject,B),p(this,this.$rectangleObject,e),this.$rectangleObject})).catch((e=>{throw e}));return this.$rectanglePromise=t,{$rectanglePromise:t}},props:{bounds:{type:Object,default:void 0},clickable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},fillColor:{type:String,default:""},fillOpacity:{type:Number,default:1},strokeColor:{type:String,default:""},strokeOpacity:{type:Number,default:1},strokePosition:{type:Number,default:0},strokeWeight:{type:Number,default:1},visible:{type:Boolean,default:!0},options:{type:Object,default:void 0}},destroyed(){this.$rectangleObject&&this.$rectangleObject.setMap&&this.$rectangleObject.setMap(null)}},undefined,undefined,undefined,!1,void 0,void 0,void 0);const Le=x({render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"vue-street-view-pano-container"},[o("div",{ref:"vue-street-view-pano",staticClass:"vue-street-view-pano"}),e._v(" "),e._t("default")],2)},staticRenderFns:[]},(function(e){e&&e("data-v-32786ad9_0",{source:".vue-street-view-pano-container{position:relative}.vue-street-view-pano-container .vue-street-view-pano{left:0;right:0;top:0;bottom:0;position:absolute}",map:void 0,media:void 0})}),{name:"StreetViewPanorama",mixins:[ve],provide(){return this.$panoPromise=new Promise(((e,t)=>{this.$panoPromiseDeferred={resolve:e,reject:t}})),{$panoPromise:this.$panoPromise,$mapPromise:this.$panoPromise}},props:{zoom:{type:Number,default:void 0},pov:{type:Object,default:void 0},position:{type:Object,default:void 0},pano:{type:String,default:void 0},motionTracking:{type:Boolean},visible:{type:Boolean,default:!0},options:{type:Object,default:void 0}},replace:!1,computed:{finalLat(){return this.position&&"function"==typeof this.position.lat?this.position.lat():this.position.lat},finalLng(){return this.position&&"function"==typeof this.position.lng?this.position.lng():this.position.lng},finalLatLng(){return{lat:this.finalLat,lng:this.finalLng}}},watch:{zoom(e){this.$panoObject&&this.$panoObject.setZoom(e)}},mounted(){const e=["closeclick","status_changed"];return this.$gmapApiPromiseLazy().then((()=>{const t=this.$refs["vue-street-view-pano"],o={...this.options,...u(this,P)},{options:i,...n}=o;return this.$panoObject=new google.maps.StreetViewPanorama(t,n),b(this,this.$panoObject,P),p(this,this.$panoObject,e),y(((e,t,o)=>{e(),this.$panoObject.addListener("position_changed",(()=>{o()&&this.$emit("position_changed",this.$panoObject.getPosition()),t()}));g(this,["finalLat","finalLng"],(()=>{e(),this.$panoObject.setPosition(this.finalLatLng)}))})),this.$panoPromiseDeferred.resolve(this.$panoObject),this.$panoPromise})).catch((e=>{throw e}))},methods:{resize(){this.$panoObject&&google.maps.event.trigger(this.$panoObject,"resize")}},destroyed(){this.$panoObject&&this.$panoObject.setMap&&this.$panoObject.setMap(null)}},undefined,false,undefined,!1,we,void 0,void 0);var Ae=["mappedProps","name","ctr","ctrArgs","events","beforeCreate","afterCreate","props"],xe=["options"];function Ee(e,t){var o=!1;window.GoogleMapsCallback=function(){try{e(),o=!0,t&&t()}catch(e){window.console.error("Error executing the GoogleMapsCallback",e)}};var i=setTimeout((function(){var e=setInterval((function(){i&&(clearTimeout(i),i=void 0),null==(window&&window.google&&window.google.maps)||o||(window.GoogleMapsCallback(),o=!0),o&&(clearInterval(e),e=void 0)}),500)}),1e3)}var We,Ne,Ie=(We=!1,function(e,t){if("object"!==i(e))throw new Error("options should  be an object");if("undefined"!=typeof document){var n=o({},e),s=n.libraries;if(We)window.console.info("You already started the loading of google maps");else{We=!0;var r="boolean"==typeof t&&t?"https://maps.google.cn":"https://maps.googleapis.com",a=document.createElement("SCRIPT");Array.isArray(s)&&(n.libraries=s.join(",")),n.callback="GoogleMapsCallback";var l=Object.keys(n).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(n[e]))})).join("&"),c="".concat(r,"/maps/api/js?").concat(l);a.setAttribute("src",c),a.setAttribute("async",""),a.setAttribute("defer",""),document.head.appendChild(a)}}});var ze={HeatmapLayer:ye,KmlLayer:be,Marker:Pe,Polyline:Be,Polygon:Ce,Circle:N,Cluster:me,Rectangle:Se,DrawingManager:fe,InfoWindow:ge,MapLayer:Me,PlaceInput:_e,Autocomplete:E,StreetViewPanorama:Le,MapElementMixin:W,MountableMixin:ve},Re={googleMapsApiInitializer:Ie,MapElementFactory:function(e){var t=e.mappedProps,i=e.name,r=e.ctr,l=e.ctrArgs,c=e.events,d=e.beforeCreate,h=e.afterCreate,f=e.props,y=s(e,Ae),g="$".concat(i,"Promise"),v="$".concat(i,"Object");return function(e,t){if(!e)throw new Error(t)}(!(f instanceof Array),"`props` should be an object, not Array"),o(o({},"undefined"!=typeof GENERATE_DOC?{$vgmOptions:e}:{}),{},{mixins:[W],props:o(o({},f),m(t)),render:function(){return""},provide:function(){var e=this,i=this.$mapPromise.then((function(i){e.$map=i;var n=o(o({},e.options),{},{map:i},u(e,t));n.options;var r=s(n,xe);if(d){var a=d.bind(e)(r);if(a instanceof Promise)return a.then((function(){return{options:r}}))}return{options:r}})).then((function(o){var i,n=o.options,s=r();return e[v]=l?new((i=Function.prototype.bind).call.apply(i,[s,null].concat(a(l(n,u(e,f||{})))))):new s(n),b(e,e[v],t),p(e,e[v],c),h&&h.bind(e)(e[v]),e[v]}));return this[g]=i,n({},g,i)},destroyed:function(){this[v]&&this[v].setMap&&this[v].setMap(null)}},y)}};function Te(e,t){var i=o({dynamicLoad:!1,installComponents:!0,autoBindAllEvents:!1,load:{libraries:"places"}},t);Ne=new e({data:{isReady:!1}});var n=new e,s=function(e,t){return function(o){function i(){return t.isReady=!0,window.google}if(o&&o.load&&o.load.key||o.dynamicLoad)return h((function(){return"undefined"==typeof window?new Promise((function(){})).then(i):new Promise((function(t,i){try{Ee(t,window[o&&o.load&&o.load.customCallback]),o.dynamicLoad||e(o.load,o.loadCn)}catch(e){i(e)}})).then(i)}));var n=new Promise((function(e){"undefined"!=typeof window&&Ee(e,window[o&&o.load&&o.load.customCallback])})).then(i);return h((function(){return n}))}}(Ie,Ne),r=s(i);e.mixin({created:function(){this.$gmapDefaultResizeBus=n,this.$gmapApiPromiseLazy=r,this.$gmapOptions=i}}),e.$gmapDefaultResizeBus=n,e.$gmapApiPromiseLazy=r,e.$gmapOptions=i,i.installComponents&&(e.component("GmapMap",Me),e.component("GmapMarker",Pe),e.component("GmapInfoWindow",ge),e.component("GmapHeatmapLayer",ye),e.component("GmapKmlLayer",be),e.component("GmapPolyline",Be),e.component("GmapPolygon",Ce),e.component("GmapCircle",N),e.component("GmapRectangle",Se),e.component("GmapDrawingManager",fe),e.component("GmapAutocomplete",E),e.component("GmapPlaceInput",_e),e.component("GmapStreetViewPanorama",Le))}var De={install:Te};e.components=ze,e.default=De,e.getGoogleMapsAPI=function(){return Ne.isReady&&window.google},e.helpers=Re,e.install=Te,Object.defineProperty(e,"__esModule",{value:!0})}));
